<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>

    </style>
</head>
<body>

    账号:<input id="user"   type="text">
                 <br>
    密码:<input id="psd"  type='password'><br>
    <input type="checkbox" checked id="check"><br>
    <select  id="mylist">
        <option  value="唱">唱</option>
        <option  value="跳">跳</option>
        <option  value="rap">rap</option>
        <option  value="篮球">篮球</option>
    </select><br/><input name="sex" value="男" type="radio">男<input name="sex" value="女" type="radio">女
    <textarea name="" id="txt" cols="30" rows="10"></textarea>

    <button  id="btn">记住密码</button>
</body>
<script>
   var formStr = 'input,textarea,select'
   function setLocalstorage(){
       var formArr = document.querySelectorAll(formStr)
    for(var i = 0; i < formArr.length;i++){
      
      if(formArr[i].type =='checkbox'||formArr[i].type == 'radio'){
          localStorage.setItem('form'+i,formArr[i].checked)
      }else{
          localStorage.setItem('form'+i,formArr[i].value)
      }
  }
   }

   function formChange(){
       var formArr = document.querySelectorAll(formStr)
       for(var i = 0; i < formArr.length;i++){
           if(formArr[i].type =='checkbox'||formArr[i].type=='radio'||formArr[i].tagName=='SELECT'){
               formArr[i].onchange = function(){
                  setLocalstorage()
               }  
               }else{
                formArr[i].onkeyup = function(){
                       setLocalstorage()
                   }
               }
           }
       }

       function getLocalStorage(){
           var formArr = document.querySelectorAll(formStr)
           if(!localStorage.getItem('form0')){
               return
           }
           for(var i = 0; i < formArr.length;i++){
               if(formArr[i].type=='checkbox' || formArr[i].type=='radio'){
                var check = localStorage.getItem('form'+i) == 'false'?false :true
                 formArr[i].checked = check
               }else{
                   formArr[i].value = localStorage.getItem('form'+i)
               }
           }
       }
     getLocalStorage()
     formChange()
    
</script>
</html>