{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\\\u7B80\\u4E66\\\\my-app\\\\src\\\\components\\\\logon.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../font-icon/iconfont.css';\nimport '../css/logon.css';\nimport axios from 'axios';\nimport '../fonticon2/iconfont.css';\n\nclass logon extends Component {\n  constructor() {\n    super();\n\n    this.logon = () => {\n      var _this = this;\n\n      axios.get('/api/login.json').then(res => {\n        console.log(res.data);\n\n        _this.setState({\n          getLoginData: res.data\n        });\n      });\n    };\n\n    this.writeValue = e => {\n      this.setState({\n        value: e.target.value,\n        psd: ''\n      });\n    };\n\n    this.writePsd = e => {\n      this.setState({\n        psd: e.target.value\n      });\n    };\n\n    this.SetCheck = e => {\n      var ischeck = this.state.ischeck;\n\n      if (!ischeck) {\n        var fromChild = this.refs.inpValue.getElementsByTagName('input');\n        console.log(fromChild);\n\n        if (!window.localStorage) {\n          alert('浏览器不支持localstorage');\n        } else {\n          localStorage.setItem('user', fromChild[0].value);\n          localStorage.setItem('psd', fromChild[1].value);\n          localStorage.setItem('isTrue', fromChild[2].checked);\n        }\n      }\n\n      this.setState({\n        ischeck: e.target.checked\n      });\n    };\n\n    this.getLocalStorage = () => {\n      var fromChild = this.refs.inpValue.getElementsByTagName('input');\n      console.log(this.state.psd);\n      var checked = localStorage.getItem('isTrue') == 'false' ? false : true;\n      fromChild[2].checked = checked;\n      fromChild[0].value = localStorage.getItem('user');\n      fromChild[1].value = localStorage.getItem('psd');\n    };\n\n    this.loginBtn = () => {\n      var fromChild = this.refs.inpValue.getElementsByTagName('input');\n      var Value = fromChild[0].value;\n      var psd = fromChild[1].value;\n      var myreg = /^1(3|4|5|7|8)\\d{9}$/;\n      var reg = new RegExp(\"^([0-9A-Za-z\\\\-_\\\\.]+)@([0-9a-z]+\\\\.[a-z]{2,3}(\\\\.[a-z]{2})?)$\"); //正则表达式\n\n      var regPsd = /^[a-zA-Z0-9]{6,18}$/;\n      var time = setTimeout(() => {\n        this.setState({\n          opacity: 0\n        });\n      }, 2000);\n      console.log(psd);\n\n      if (!(myreg.test(Value) || reg.test(Value) || regPsd.test(psd)) || Value == '' || psd == '') {\n        if (Value == '' || psd == '') {\n          this.setState({\n            loginMsg: '账号或密码不能为空',\n            opacity: 1\n          });\n        } else {\n          this.setState({\n            loginMsg: '账号或密码错误',\n            opacity: 1\n          });\n        }\n\n        time = time;\n        return;\n      } else {\n        this.setState({\n          loginMsg: '登录成功',\n          opacity: 1\n        });\n      }\n    };\n\n    this.state = {\n      getLoginData: '',\n      value: '',\n      psd: '',\n      ischeck: false,\n      loginMsg: '',\n      opacity: 0\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"logonPage clearfloat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      ref: \"/\",\n      className: \"logo1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"//cdn2.jianshu.io/assets/web/logo-58fd04f6f0de908401aa561cda6a0688.png\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"logon-cont clearfloat\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"from-tab\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"tab-items current-logon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27\n      },\n      __self: this\n    }, \"\\u767B\\u5F55\"), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }, \"\\xB7\"), React.createElement(\"a\", {\n      className: \"tab-items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, \"\\u6CE8\\u518C\")), React.createElement(\"form\", {\n      action: \"\",\n      id: \"logon-from\",\n      ref: \"inpValue\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"logon-write\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"iconfont icon-yonghu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"iconfont icon-mima\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"user\",\n      type: \"text\",\n      onChange: this.writeValue,\n      value: this.state.value,\n      placeholder: \"\\u624B\\u673A\\u53F7\\u6216\\u90AE\\u7BB1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      id: \"psd\",\n      type: \"password\",\n      onChange: this.writePsd,\n      value: this.state.psd,\n      placeholder: \"\\u5BC6\\u7801\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"logon-option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"checked-btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      onChange: this.SetCheck,\n      checked: this.state.ischeck,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \"\\xA0\\u8BB0\\u4F4F\\u6211\"), React.createElement(\"span\", {\n      className: \"logonIssue \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"\\u767B\\u5F55\\u9047\\u5230\\u95EE\\u9898?\"))), React.createElement(\"input\", {\n      onClick: this.loginBtn,\n      type: \"button\",\n      id: \"logon-btn\",\n      value: \"\\u767B\\u5F55\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"loginMsg\",\n      style: {\n        opacity: this.state.opacity\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, this.state.loginMsg)), React.createElement(\"div\", {\n      className: \"elseAccount\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"elseTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"\\u793E\\u4EA4\\u8D26\\u53F7\\u767B\\u5F55\"), React.createElement(\"i\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"elseItem\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"iconfont icon-weibo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"iconfont icon-weixin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"iconfont icon-qq\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"i\", {\n      className: \"iconfont icon-douban\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    })))));\n  }\n\n  componentDidMount() {\n    this.logon();\n    setTimeout(this.getLocalStorage, 100);\n  }\n\n}\n\nexport default logon;","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\简书\\my-app\\src\\components\\logon.js"],"names":["React","Component","Link","axios","logon","constructor","_this","get","then","res","console","log","data","setState","getLoginData","writeValue","e","value","target","psd","writePsd","SetCheck","ischeck","state","fromChild","refs","inpValue","getElementsByTagName","window","localStorage","alert","setItem","checked","getLocalStorage","getItem","loginBtn","Value","myreg","reg","RegExp","regPsd","time","setTimeout","opacity","test","loginMsg","render","componentDidMount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport '../font-icon/iconfont.css'\r\nimport '../css/logon.css'\r\nimport axios from 'axios'\r\nimport '../fonticon2/iconfont.css'\r\nclass logon extends Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            getLoginData: '',\r\n            value: '',\r\n            psd: '',\r\n            ischeck: false,\r\n            loginMsg: '',\r\n            opacity:0\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n\r\n            <div className='logonPage clearfloat'>\r\n\r\n                <a ref='/' className='logo1'><img src='//cdn2.jianshu.io/assets/web/logo-58fd04f6f0de908401aa561cda6a0688.png' /></a>\r\n                <div className='logon-cont clearfloat'>\r\n                    <div className='from-tab'>\r\n                        <a className='tab-items current-logon'>登录</a>\r\n                        <i>·</i>\r\n                        <a className='tab-items'>注册</a>\r\n                    </div>\r\n                    <form action='' id='logon-from' ref='inpValue'>\r\n                        <div className='logon-write'>\r\n                            <i className='iconfont icon-yonghu'></i>\r\n                            <i className='iconfont icon-mima'></i>\r\n                            <input id='user' type='text' onChange={this.writeValue} value={this.state.value} placeholder='手机号或邮箱' />\r\n                            <input id='psd' type='password' onChange={this.writePsd} value={this.state.psd} placeholder='密码' />\r\n                        </div>\r\n\r\n                        <div className='logon-option'>\r\n                            <div className='checked-btn'>\r\n                                <input type='checkbox' onChange={this.SetCheck} checked={this.state.ischeck} />\r\n                                <span>&nbsp;记住我</span>\r\n                                <span className='logonIssue '>登录遇到问题?</span>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <input  onClick={this.loginBtn} type='button' id='logon-btn' value='登录' />\r\n                        <div className='loginMsg' style={{opacity:this.state.opacity}}>{this.state.loginMsg}</div>\r\n                    </form>\r\n                    <div className='elseAccount'>\r\n                        <div className='elseTitle'>\r\n                            <i></i>\r\n                            <span>社交账号登录</span>\r\n                            <i></i>\r\n                        </div>\r\n                        <div className='elseItem'>\r\n                            <i className='iconfont icon-weibo'></i>\r\n                            <i className='iconfont icon-weixin'></i>\r\n                            <i className='iconfont icon-qq'></i>\r\n                            <i className='iconfont icon-douban'></i>\r\n\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n    logon = () => {\r\n        var _this = this\r\n        axios.get('/api/login.json')\r\n            .then((res) => {\r\n                console.log(res.data)\r\n                _this.setState({\r\n                    getLoginData: res.data\r\n                })\r\n            })\r\n    }\r\n    writeValue = (e) => {\r\n        this.setState({\r\n            value: e.target.value,\r\n            psd: ''\r\n        })\r\n    }\r\n    writePsd = (e) => {\r\n        this.setState({\r\n            psd: e.target.value\r\n        })\r\n    }\r\n    SetCheck = (e) => {\r\n\r\n        var ischeck = this.state.ischeck\r\n\r\n        if (!ischeck) {\r\n            var fromChild = this.refs.inpValue.getElementsByTagName('input')\r\n            console.log(fromChild)\r\n            if (!window.localStorage) {\r\n                alert('浏览器不支持localstorage')\r\n            } else {\r\n                localStorage.setItem('user', fromChild[0].value)\r\n                localStorage.setItem('psd', fromChild[1].value)\r\n                localStorage.setItem('isTrue', fromChild[2].checked)\r\n            }\r\n\r\n        }\r\n\r\n        this.setState({\r\n            ischeck: e.target.checked\r\n        })\r\n    }\r\n    getLocalStorage = () => {\r\n        var fromChild = this.refs.inpValue.getElementsByTagName('input')\r\n        console.log(this.state.psd)\r\n        var checked = localStorage.getItem('isTrue') == 'false' ? false : true;\r\n        fromChild[2].checked = checked\r\n        fromChild[0].value = localStorage.getItem('user')\r\n        fromChild[1].value = localStorage.getItem('psd')\r\n    }\r\n    loginBtn = () => {\r\n        var fromChild = this.refs.inpValue.getElementsByTagName('input')\r\n        var Value = fromChild[0].value\r\n        var psd =   fromChild[1].value\r\n        var myreg = /^1(3|4|5|7|8)\\d{9}$/;\r\n        var reg = new RegExp(\"^([0-9A-Za-z\\\\-_\\\\.]+)@([0-9a-z]+\\\\.[a-z]{2,3}(\\\\.[a-z]{2})?)$\"); //正则表达式\r\n        var regPsd = /^[a-zA-Z0-9]{6,18}$/;\r\n    \r\n        var time=setTimeout(() => {\r\n            this.setState({\r\n                opacity:0\r\n\r\n            })\r\n          \r\n        }, 2000);\r\n        console.log(psd)\r\n        if (!(myreg.test(Value) || reg.test(Value) || regPsd.test(psd))||(Value == ''||psd=='')) {\r\n            if(Value == ''||psd==''){\r\n                this.setState({\r\n                    loginMsg: '账号或密码不能为空',\r\n                    opacity:1\r\n                })\r\n            }else{\r\n                this.setState({\r\n                    loginMsg: '账号或密码错误',\r\n                    opacity:1\r\n                })\r\n            }\r\n           \r\n      \r\n            time  = time\r\n            return\r\n        } else {\r\n            \r\n            this.setState({\r\n                loginMsg: '登录成功',\r\n                opacity:1,\r\n              \r\n             \r\n            })\r\n           \r\n        }\r\n     \r\n    }\r\n   \r\n    componentDidMount() {\r\n        this.logon() \r\n        setTimeout(this.getLocalStorage, 100)\r\n      \r\n      \r\n    }\r\n}\r\nexport default logon "]},"metadata":{},"sourceType":"module"}